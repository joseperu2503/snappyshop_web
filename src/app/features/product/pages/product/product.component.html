<div class="content">
  <div class="product-detail">
    <div class="left">
      <div class="swiper-container">
        <swiper-container [slidesPerView]="1" #swiper>
          @for (image of product()?.images; track $index) {
          <swiper-slide class="swiper-slide">
            <app-image [src]="image" alt="" class="product-image"></app-image>
          </swiper-slide>
          }
        </swiper-container>
      </div>

      <div class="images-preview-container">
        <div class="images-preview">
          @for (image of product()?.images; track $index) {
          <div [ngClass]="{ selected: imageIndex() == $index }">
            <app-image
              [src]="image"
              class="image-preview"
              (click)="slideToImage($index)"
            ></app-image>
          </div>
          }
        </div>
      </div>
    </div>
    <div class="right">
      <div class="store-header">
        @if (loading() == LoadingStatus.Loading) {
        <div class="skeleton"></div>
        }@else{
        <app-image [src]="store()?.isotype" class="logo"></app-image>
        <p class="name">{{ store()?.name }}</p>
        }
      </div>
      <div class="product-name-container">
        @if (loading() == LoadingStatus.Loading) {
        <div class="skeleton"></div>
        }@else{
        <h1 class="product-name">{{ product()?.name }}</h1>
        <button
          mat-icon-button
          class="heart-button center"
          [ngClass]="{ 'is-favorite': product()?.is_favorite }"
          (click)="toggleFavorite()"
        >
          @if (product()?.is_favorite) {
          <svg-icon
            src="assets/icons/heart_solid.svg"
            class="heart-icon solid"
          ></svg-icon>
          }@else{
          <svg-icon
            src="assets/icons/heart_outlined.svg"
            class="heart-icon outlined"
          ></svg-icon>
          }
        </button>
        }
      </div>
      <div class="product-price-row">
        <p class="product-sale-price">{{ salePrice() | price }}</p>
        <p class="product-base-price">{{ basePrice() | price }}</p>
      </div>
      <div class="quantity-row">
        <p class="quantity-label">Quantity</p>
        <app-button-stepper [value]="2"></app-button-stepper>
      </div>

      <div class="buttons-row">
        <app-button text="Add to cart"></app-button>
        <app-button type="secondary" text="Buy now"></app-button>
      </div>

      <p class="product-description-label subtitle-label">Description</p>
      <p class="product-description">{{ product()?.description }}</p>
      <div style="height: 80px"></div>
    </div>
  </div>

  <div>
    <p class="store-related-products-label subtitle-label">
      More from {{ store()?.name }}
    </p>
    <div class="grid-container">
      @for (product of productDetail()?.store_related_products; track $index) {
      <app-product-item [product]="product"> </app-product-item>
      }
    </div>
  </div>
</div>
